<!DOCTYPE html><html><head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Performer View</title>
<script src="/socket.io/socket.io.js"></script>
<style>
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:#0a0a0a;color:#f3f3f3;margin:0}
.wrap{max-width:760px;margin:0 auto;padding:16px}
header{display:flex;align-items:center;gap:10px;padding:12px 0}
header h1{font-size:20px;margin:0;font-weight:700}
.card{background:#121212;border:1px solid #272727;border-radius:16px;padding:16px}
#qr{margin:12px auto;display:grid;place-items:center;background:#0f0f0f;border-radius:12px;padding:12px}
.row{display:flex;gap:10px;align-items:center}
input{width:100%;background:#0a0a0a;color:#f3f3f3;border:1px solid #2a2a2a;border-radius:10px;padding:10px;font-size:12px}
button{background:#f3f3f3;color:#0a0a0a;border:none;border-radius:12px;padding:10px 14px;font-weight:600;cursor:pointer}
#display{min-height:160px;display:grid;place-items:center;text-align:center;background:#0a0a0a;border:1px solid #2a2a2a;border-radius:14px;padding:18px}
#title{font-size:24px;font-weight:800} #meta{color:#b5b5b5;margin-top:6px;font-size:12px}
</style></head><body>
<div class="wrap">
<header><div style="width:28px;height:28px;border-radius:9px;background:#262626"></div><h1>MovieBase — Performer</h1><div style="margin-left:auto;color:#a1a1a1;font-size:12px">Live link + peek</div></header>
<div class="grid" style="display:grid;grid-template-columns:1fr;gap:16px;">
  <div class="card">
    <div class="row"><button id="create">Create Session</button><div id="session" style="color:#a1a1a1;font-size:12px;"></div></div>
    <div id="qr"><canvas id="qrCanvas" width="280" height="280"></canvas></div>
    <div class="row"><input id="url" readonly placeholder="Spectator link will appear here"/><button id="copy">Copy</button></div>
  </div>
  <div class="card">
    <div style="color:#a1a1a1;font-size:12px;">Incoming selection</div>
    <div id="display"><div style="color:#6a6a6a;">Waiting…</div></div>
  </div>
</div></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
<script>
const socket=io();const sessionEl=document.getElementById('session');const urlEl=document.getElementById('url');const qrCanvas=document.getElementById('qrCanvas');
document.getElementById('create').onclick=()=>socket.emit('createSession');
const qr=new QRious({element:qrCanvas,size:280,value:' '});
document.getElementById('copy').onclick=async()=>{try{await navigator.clipboard.writeText(urlEl.value);alert('Link copied');}catch(e){alert('Copy failed');}};
socket.on('sessionCreated',code=>{const link=location.origin+'/?s='+code;sessionEl.textContent='Session '+code;urlEl.value=link;qr.set({value:link});});
socket.on('movieSelected',movie=>{const d=document.getElementById('display');d.innerHTML='';const t=document.createElement('div');t.id='title';t.textContent=movie.title+(movie.year?' ('+movie.year+')':'');const m=document.createElement('div');m.id='meta';m.textContent=(movie.genres||[]).join(', ');d.appendChild(t);d.appendChild(m);try{if(navigator.vibrate)navigator.vibrate([12,60,12]);}catch{}});
</script></body></html>
